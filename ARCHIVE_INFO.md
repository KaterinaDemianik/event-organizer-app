# Система архівування подій

##  Автоматичне архівування

Завершені події автоматично переміщуються в архів.

### Як це працює:

1. **Автоматична перевірка** - Події, які завершились (ends_at < now), автоматично отримують статус "archived"
2. **Management команда** - Запустіть вручну для архівування:
   ```bash
   python manage.py archive_past_events
   ```

3. **Cron job** (опціонально) - Налаштуйте автоматичний запуск:
   ```bash
   # Додайте в crontab для щоденного запуску о 00:00
   0 0 * * * cd /path/to/project && python manage.py archive_past_events
   ```

##  Перегляд архіву

Авторизовані користувачі можуть переглядати архівні події через вкладку **"Архів"** на головній сторінці.

### Особливості архівних подій:

-  Неможлива реєстрація (RSVP)
-  Доступні тільки для читання
-  Можна шукати та фільтрувати
-  Видимі всім авторизованим користувачам

##  Валідація дат

### При створенні/редагуванні події:

1. **Дата початку не може бути в минулому**
   - Помилка: "Дата початку події не може бути в минулому. Оберіть майбутню дату."

2. **Дата закінчення має бути пізніше дати початку**
   - Помилка: "Дата закінчення має бути пізніше дати початку події."

##  Статуси подій

| Статус | Опис | Дії |
|--------|------|-----|
| **draft** | Чернетка | Редагування, публікація |
| **published** | Опубліковано | RSVP, редагування, скасування |
| **cancelled** | Скасовано | Тільки перегляд |
| **archived** | Архів | Тільки перегляд |

##  Життєвий цикл події

```
draft → published → archived
          ↓
      cancelled
```

1. **Створення** - Подія створюється зі статусом "draft"
2. **Публікація** - Організатор змінює статус на "published"
3. **Активна** - Користувачі можуть реєструватися
4. **Завершення** - Після ends_at подія автоматично архівується
5. **Архів** - Подія доступна для перегляду в архіві

##  Корисні команди

```bash
# Архівувати завершені події
python manage.py archive_past_events

# Переглянути всі події в архіві
python manage.py shell
>>> from events.models import Event
>>> Event.objects.filter(status=Event.ARCHIVED).count()
```
